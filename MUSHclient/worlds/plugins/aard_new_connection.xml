<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE muclient>

<muclient>
<plugin
   name="Aardwolf_New_Connection"
   author="Fiendish"
   id="9f796334ab9ed476ef44f1dc"
   language="Lua"
   purpose="Welcome players to the new client package"
   date_written="2010-11-22 18:32:06"
   requires="4.73"
   version="1.0"
   save_state="y"
>
</plugin>
<aliases>
<alias
   match="connect to aardwolf"
   enabled="y"
   sequence="100"
   omit_from_output="y"
   ignore_case="y"
   send_to="12"
><send>Connect()</send>
</alias>
</aliases>
<script>
<![CDATA[

function OnPluginSaveState ()
   SetVariable("showGreeting2", showGreeting2)
end -- OnPluginSaveState

loaded = false
function OnPluginListChanged()
   dofile "lua/aard_requirements.lua"
   if aard_req_novisuals_mode then
      LoadPlugin(GetPluginInfo(GetPluginID(), 20).."aard_new_connection_no_UI.xml")
      return
   end
   if not loaded then
      showGreeting2 = tonumber(GetVariable("showGreeting2")) or showGreeting2
      if (showGreeting2 == 1) then
         ShowGreeting(true)
      else
         Connect()
      end
   end
   loaded = true
end

function ShowGreeting(firstTime, highlight_url)
   if (firstTime) then

      Note("")
      Note("Screen reader users: The non-visual package version at https://fiendish.github.io/aardwolfclientpackage/ comes pre-configured for screen reader text to speech. This version does not. Otherwise, to bypass this welcome screen and connect to the game, type \"connect to aardwolf\" without the quotation marks.")
      Note("For help with the client type \"aard help\" without the quotation marks.")
      Note("")

    if not aard_req_novisuals_mode then
     utils.msgbox("Welcome to the AardMUSH client!\n\nFor help type 'aard help'.\n\n\nThis dialog will not be displayed again.", "Welcome", "ok", "i")
    end
    showGreeting2 = 0
   end
   Connect()
end -- ShowGreeting

function getmemoryusage()
  collectgarbage('collect')
  return collectgarbage('count')
end

]]>
</script>
</muclient>
